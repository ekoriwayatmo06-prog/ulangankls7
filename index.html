<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ujian Informatika - Jaringan Komputer</title>
    
    <!-- Tailwind CSS (Untuk Tampilan) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (Mesin Aplikasi) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (Penerjemah Kode agar jalan di browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        /* Animasi Kustom */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- IKON (Pengganti Lucide-React agar jalan tanpa install) ---
        const IconClock = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>;
        const IconCheckCircle = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>;
        const IconBookOpen = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>;
        const IconFileText = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>;
        const IconSend = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>;
        const IconShield = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
        const IconNetwork = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="16" y="16" width="6" height="6" rx="1"/><rect x="2" y="16" width="6" height="6" rx="1"/><rect x="9" y="2" width="6" height="6" rx="1"/><path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3"/><path d="M12 12V8"/></svg>;
        const IconGlobe = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>;
        const IconLock = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>;
        const IconXCircle = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>;

        // --- PENGATURAN JADWAL UJIAN ---
        // Ganti tanggal di sini sesuai kebutuhan
        const JADWAL_UJIAN = new Date("2026-01-28T07:00:00"); 

        // --- DATA SOAL (BANK SOAL - SAMA PERSIS) ---
        const QUESTION_BANK = [
            // --- TOPIC: PENGERTIAN & KONSEP DASAR ---
            { id: 1, topic: "Pengertian Jaringan", level: "C1", type: "single", question: "Apa tujuan utama dari dibangunnya sebuah jaringan komputer?", options: ["Agar komputer terlihat canggih", "Untuk berbagi sumber daya (data, printer, koneksi) antar perangkat", "Hanya untuk bermain game online", "Untuk menghabiskan kuota internet"], correctAnswer: [1] },
            { id: 2, topic: "Pengertian Jaringan", level: "C2", type: "single", question: "Manakah pernyataan yang PALING TEPAT menggambarkan hubungan antara Server dan Client?", options: ["Server meminta layanan, Client melayani", "Server dan Client tidak saling berhubungan", "Server menyediakan layanan/data, Client mengakses/meminta layanan tersebut", "Server hanya untuk internet, Client hanya untuk mengetik"], correctAnswer: [2] },
            
            // --- TOPIC: TIPE JARINGAN ---
            { id: 3, topic: "Tipe Jaringan", level: "C3", type: "single", question: "Pak Budi ingin menghubungkan 10 komputer dalam satu ruang laboratorium sekolah. Jenis jaringan apa yang paling tepat diterapkan?", options: ["WAN (Wide Area Network)", "MAN (Metropolitan Area Network)", "LAN (Local Area Network)", "Internet"], correctAnswer: [2] },
            { id: 4, topic: "Tipe Jaringan", level: "C4", type: "complex", question: "Analisis karakteristik WAN (Wide Area Network). Pilihlah DUA pernyataan yang benar!", options: ["Mencakup wilayah geografis yang sangat luas (negara/benua)", "Hanya mencakup satu gedung sekolah", "Membutuhkan router dan infrastruktur publik/satelit", "Kecepatan transfer datanya pasti lebih cepat dari LAN kabel"], correctAnswer: [0, 2] },
            { id: 5, topic: "Tipe Jaringan", level: "C1", type: "single", question: "Jaringan yang menghubungkan komputer di seluruh dunia tanpa batas geografis disebut...", options: ["Intranet", "Internet", "Ekstranet", "Lokalnet"], correctAnswer: [1] },

            // --- TOPIC: JENIS KONEKSI ---
            { id: 6, topic: "Jenis Koneksi", level: "C2", type: "complex", question: "Manakah dari berikut ini yang merupakan media transmisi jaringan NIRKABEL (Wireless)? Pilih dua jawaban.", options: ["Kabel Fiber Optik", "Gelombang Radio (Wi-Fi)", "Kabel Coaxial", "Bluetooth"], correctAnswer: [1, 3] },
            { id: 7, topic: "Jenis Koneksi", level: "C3", type: "single", question: "Kamu sedang berada di kafe dan ingin menghubungkan laptop ke internet tanpa menggunakan kabel. Fitur apa yang harus kamu aktifkan di laptop?", options: ["Ethernet", "Wi-Fi", "Bluetooth", "NFC"], correctAnswer: [1] },
            { id: 8, topic: "Jenis Koneksi", level: "C4", type: "single", question: "Jika dibandingkan antara kabel Fiber Optik dan kabel Tembaga (UTP), mengapa Fiber Optik lebih unggul untuk jarak jauh?", options: ["Karena lebih murah harganya", "Karena menggunakan sinyal listrik yang kuat", "Karena menggunakan cahaya sehingga minim gangguan dan sangat cepat", "Karena kabelnya lebih besar dan berat"], correctAnswer: [2] },
            { id: 9, topic: "Jenis Koneksi", level: "C5", type: "single", question: "Sebuah sekolah di pedalaman tidak terjangkau kabel telepon maupun fiber optik. Apa solusi koneksi internet yang paling logis untuk dievaluasi penggunaannya?", options: ["Dial-up", "VSAT (Satelit)", "Kabel LAN", "Bluetooth Tethering"], correctAnswer: [1] },
            { id: 10, topic: "Jenis Koneksi", level: "C1", type: "single", question: "Tethering adalah istilah untuk...", options: ["Mematikan internet", "Berbagi koneksi internet dari HP ke perangkat lain", "Mengunci data dengan password", "Membersihkan virus"], correctAnswer: [1] },

            // --- TOPIC: ENKRIPSI ---
            { id: 11, topic: "Enkripsi", level: "C1", type: "single", question: "Apa itu Enkripsi?", options: ["Proses menghapus data virus", "Proses mengubah data menjadi kode acak agar tidak bisa dibaca orang lain", "Proses mempercepat koneksi internet", "Proses menyalakan komputer jarak jauh"], correctAnswer: [1] },
            { id: 12, topic: "Enkripsi", level: "C3", type: "single", question: "Saat membuka website perbankan, kamu melihat ikon 'Gembok' dan protokol 'HTTPS'. Apa artinya?", options: ["Website sedang dikunci admin", "Koneksi antara kamu dan website terenkripsi (aman)", "Website tidak bisa dibuka", "Internet kamu sedang lambat"], correctAnswer: [1] },
            { id: 13, topic: "Enkripsi", level: "C4", type: "single", question: "Jika Ani mengirim pesan WA ke Budi, dan pesan itu disadap oleh hacker di tengah jalan tetapi hacker hanya melihat kode acak, teknologi apa yang bekerja?", options: ["End-to-End Encryption", "Firewall Protection", "Antivirus Scan", "Bluetooth Pairing"], correctAnswer: [0] },
            { id: 14, topic: "Enkripsi", level: "C2", type: "single", question: "Caesar Cipher adalah contoh sederhana dari teknik...", options: ["Kompresi", "Koneksi", "Kriptografi (Enkripsi)", "Topologi"], correctAnswer: [2] },

            // --- TOPIC: PROTEKSI DATA ---
            { id: 15, topic: "Proteksi Data", level: "C6", type: "complex", question: "Kamu diminta merancang kebijakan password yang kuat untuk email kelas. Pilih TIGA kriteria password yang kuat!", options: ["Minimal 8 karakter", "Hanya menggunakan tanggal lahir agar mudah diingat", "Kombinasi huruf besar, kecil, angka, dan simbol", "Tidak menggunakan kata umum (seperti 'password123')", "Sama dengan nama pengguna"], correctAnswer: [0, 2, 3] },
            { id: 16, topic: "Proteksi Data", level: "C2", type: "single", question: "Apa fungsi utama dari Firewall dalam jaringan komputer?", options: ["Memadamkan api jika komputer panas", "Memeriksa dan memfilter lalu lintas data yang masuk/keluar untuk keamanan", "Mempercepat download file", "Menyimpan data cadangan"], correctAnswer: [1] },
            { id: 17, topic: "Proteksi Data", level: "C5", type: "complex", question: "Seorang siswa mendapati komputernya menjadi sangat lambat dan muncul banyak iklan pop-up aneh. Evaluasi kemungkinan penyebabnya (Pilih dua)!", options: ["Komputer terinfeksi Malware/Adware", "Koneksi internet terlalu cepat", "Siswa mengklik link phishing sembarangan", "Monitor komputer rusak"], correctAnswer: [0, 2] },

            // --- TOPIC: CAMPURAN ---
            { id: 18, topic: "Analisis Jaringan", level: "C4", type: "single", question: "Mengapa streaming video HD membutuhkan bandwidth yang lebih besar daripada sekadar mengirim email?", options: ["Karena email lebih penting", "Karena data video ukurannya jauh lebih besar dan butuh transfer realtime", "Karena video warnanya cerah", "Karena email menggunakan kabel, video menggunakan wifi"], correctAnswer: [1] },
            { id: 19, topic: "Topologi", level: "C3", type: "single", question: "Dalam sebuah lab, jika satu kabel putus maka seluruh komputer tidak bisa terkoneksi. Ini adalah kelemahan ciri khas topologi...", options: ["Star", "Bus", "Mesh", "Tree"], correctAnswer: [1] },
            { id: 20, topic: "Perangkat Keras", level: "C2", type: "complex", question: "Pilih DUA perangkat keras yang berfungsi sebagai penghubung dalam jaringan kabel!", options: ["Switch", "Router", "Flashdisk", "Harddisk"], correctAnswer: [0, 1] },
            { id: 21, topic: "ISP", level: "C1", type: "single", question: "Perusahaan penyedia jasa layanan internet (seperti Telkom, Biznet, dll) disebut...", options: ["WWW", "ISP (Internet Service Provider)", "HTTP", "URL"], correctAnswer: [1] },
            { id: 22, topic: "Sinyal", level: "C2", type: "single", question: "Modem berfungsi untuk...", options: ["Menyimpan data", "Mengubah sinyal digital menjadi analog dan sebaliknya", "Mencetak dokumen", "Mendinginkan CPU"], correctAnswer: [1] },
            { id: 23, topic: "Keamanan", level: "C5", type: "single", question: "Kamu menerima email dari 'Bank' meminta PIN dan password. Tindakan yang paling tepat untuk mengevaluasi keamanan adalah...", options: ["Langsung membalas karena takut rekening diblokir", "Mengabaikan dan menghapusnya karena bank tidak pernah minta password via email (Phishing)", "Meneruskan email ke teman", "Mengklik link di dalamnya untuk memastikan"], correctAnswer: [1] },
            { id: 24, topic: "Desain Jaringan", level: "C6", type: "complex", question: "Jika kamu diminta membuat jaringan hotspot di rumah 2 lantai agar sinyal merata, alat apa yang perlu ditambahkan jika 1 router tidak cukup menjangkau lantai 2? (Pilih dua solusi)", options: ["Wi-Fi Extender / Repeater", "Access Point tambahan", "Kabel VGA", "Printer Network"], correctAnswer: [0, 1] },
            { id: 25, topic: "Identifikasi", level: "C1", type: "single", question: "Alamat unik yang dimiliki setiap perangkat jaringan agar bisa dikenali disebut...", options: ["IP Address", "Email Address", "Home Address", "Web Address"], correctAnswer: [0] }
        ];

        // --- COMPONENTS ---

        function Modal({ isOpen, title, message, onClose }) {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg shadow-2xl max-w-sm w-full p-6 animate-fade-in transform scale-100">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-gray-800">{title}</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600"><IconXCircle /></button>
                        </div>
                        <p className="text-gray-600 mb-6">{message}</p>
                        <button onClick={onClose} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-lg transition">
                            Mengerti
                        </button>
                    </div>
                </div>
            );
        }

        function InformatikaExamApp() {
            // State
            const [step, setStep] = useState('intro');
            const [studentData, setStudentData] = useState({ name: '', class: '', absentNo: '', parentPhone: '' });
            const [questions, setQuestions] = useState([]);
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [timeLeft, setTimeLeft] = useState(30);
            const [answers, setAnswers] = useState({});
            const [examResult, setExamResult] = useState(null);
            const [isExamOpen, setIsExamOpen] = useState(false);
            const [timeRemaining, setTimeRemaining] = useState('');
            
            // Modal State (Pengganti Alert)
            const [modal, setModal] = useState({ isOpen: false, title: '', message: '' });

            const timerRef = useRef(null);
            const scheduleIntervalRef = useRef(null);

            // Utils
            const showModal = (title, message) => {
                setModal({ isOpen: true, title, message });
            };

            const closeModal = () => {
                setModal({ ...modal, isOpen: false });
            };

            const shuffleArray = (array) => {
                let currentIndex = array.length, randomIndex;
                while (currentIndex !== 0) {
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex--;
                    [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
                }
                return array;
            };

            // Check Schedule
            useEffect(() => {
                const checkSchedule = () => {
                    const now = new Date();
                    if (now >= JADWAL_UJIAN) {
                        setIsExamOpen(true);
                    } else {
                        setIsExamOpen(false);
                        const diff = JADWAL_UJIAN - now;
                        if (diff > 0) {
                            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                            const minutes = Math.floor((diff / 1000 / 60) % 60);
                            const seconds = Math.floor((diff / 1000) % 60);
                            setTimeRemaining(`${days}h ${hours}j ${minutes}m ${seconds}d`);
                        } else {
                            setIsExamOpen(true);
                        }
                    }
                };
                checkSchedule();
                scheduleIntervalRef.current = setInterval(checkSchedule, 1000);
                return () => clearInterval(scheduleIntervalRef.current);
            }, []);

            // Handlers
            const handleStartExam = (e) => {
                e.preventDefault();
                if (!studentData.name || !studentData.class || !studentData.parentPhone) {
                    showModal("Data Kurang", "Mohon lengkapi semua data diri siswa!");
                    return;
                }

                if (!isExamOpen) {
                    showModal("Belum Waktunya", "Waktu ujian belum dimulai. Harap tunggu!");
                    return;
                }

                // Cek Status Pengerjaan (Local Storage)
                const statusKey = `exam_status_${studentData.class}_${studentData.absentNo}`;
                const hasTakenExam = localStorage.getItem(statusKey);

                if (hasTakenExam) {
                    showModal("Akses Ditolak", `Siswa kelas ${studentData.class} No. Absen ${studentData.absentNo} sudah pernah mengerjakan ujian ini. Kesempatan hanya 1 kali.`);
                    return;
                }

                const shuffledQuestions = shuffleArray([...QUESTION_BANK]);
                setQuestions(shuffledQuestions);
                setStep('exam');
                startTimer();
            };

            const startTimer = () => {
                setTimeLeft(30);
                if (timerRef.current) clearInterval(timerRef.current);
                timerRef.current = setInterval(() => {
                    setTimeLeft((prev) => {
                        if (prev <= 1) {
                            handleNextQuestion(true);
                            return 30;
                        }
                        return prev - 1;
                    });
                }, 1000);
            };

            const handleOptionSelect = (qId, optionIndex, type) => {
                setAnswers(prev => {
                    const currentSelection = prev[qId] || [];
                    if (type === 'single') {
                        return { ...prev, [qId]: [optionIndex] };
                    } else {
                        if (currentSelection.includes(optionIndex)) {
                            return { ...prev, [qId]: currentSelection.filter(i => i !== optionIndex) };
                        } else {
                            return { ...prev, [qId]: [...currentSelection, optionIndex] };
                        }
                    }
                });
            };

            const handleNextQuestion = (isAuto = false) => {
                clearInterval(timerRef.current);
                if (currentQIndex >= questions.length - 1) {
                    finishExam();
                } else {
                    setCurrentQIndex(prev => prev + 1);
                    startTimer();
                }
            };

            const finishExam = () => {
                clearInterval(timerRef.current);
                let correctCount = 0;
                let wrongCount = 0;

                questions.forEach(q => {
                    const userAns = answers[q.id] || [];
                    const correctAns = q.correctAnswer;
                    const sortedUser = [...userAns].sort();
                    const sortedCorrect = [...correctAns].sort();
                    const isCorrect = JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect);
                    
                    if (isCorrect) correctCount++;
                    else wrongCount++;
                });

                const finalScore = (correctCount / questions.length) * 100;
                setExamResult({ score: finalScore, correct: correctCount, wrong: wrongCount });

                // Simpan status sudah ujian
                const statusKey = `exam_status_${studentData.class}_${studentData.absentNo}`;
                localStorage.setItem(statusKey, 'done');

                setStep('result');
                submitToGoogleSheets(finalScore, correctCount, wrongCount);
            };

            const submitToGoogleSheets = (score, correct, wrong) => {
                const data = {
                    name: studentData.name,
                    class: studentData.class,
                    absentNo: studentData.absentNo,
                    parentPhone: studentData.parentPhone,
                    score: score,
                    correct: correct,
                    wrong: wrong
                };
                
                // MASUKKAN URL GOOGLE SCRIPT ANDA DI SINI
                const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx_Ik8ECsIY_2B2e_WLIZPsbZdn736pXXmj7y2MUROxgdxL2o7P9aXucvAvxFj7nBg/exec"; 

                if (!GOOGLE_SCRIPT_URL) return;

                fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                }).then(() => console.log("Terkirim")).catch(e => console.error(e));
            };

            const sendToWhatsApp = () => {
                const phone = studentData.parentPhone.replace(/^0/, '62').replace(/\D/g,'');
                const message = `*Laporan Hasil Ujian Informatika*\n---------------------------\nNama: ${studentData.name}\nKelas: ${studentData.class}\nNo. Absen: ${studentData.absentNo}\n---------------------------\nNilai: *${examResult.score.toFixed(2)}*\nBenar: ${examResult.correct}\nSalah: ${examResult.wrong}\n---------------------------\n_Terima kasih telah mengikuti ujian._`;
                window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`, '_blank');
            };

            // --- UI RENDER ---

            return (
                <div className="min-h-screen font-sans">
                    <Modal isOpen={modal.isOpen} title={modal.title} message={modal.message} onClose={closeModal} />

                    {step === 'intro' && (
                        <div className="min-h-screen bg-gray-50 p-4 md:p-8">
                            <div className="max-w-4xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-200">
                                <div className="bg-blue-600 p-6 text-white text-center">
                                    <h1 className="text-3xl font-bold mb-2 flex items-center justify-center gap-2"><IconNetwork/> UJIAN INFORMATIKA KELAS 7</h1>
                                    <p className="opacity-90">Materi: Jaringan Komputer & Internet</p>
                                    {!isExamOpen && <div className="mt-4 bg-yellow-500 text-yellow-900 inline-block px-4 py-1 rounded-full text-sm font-semibold animate-pulse">⏳ Ujian dibuka dalam: {timeRemaining}</div>}
                                    {isExamOpen && <div className="mt-4 bg-green-500 text-white inline-block px-4 py-1 rounded-full text-sm font-semibold">✅ Ujian Sedang Berlangsung</div>}
                                </div>
                                <div className="p-6 md:p-8 space-y-8">
                                    {/* Materi Singkat */}
                                    <section className="bg-blue-50 p-6 rounded-xl border border-blue-100">
                                        <h2 className="flex items-center text-xl font-bold text-blue-800 mb-4">
                                            <span className="mr-2"><IconBookOpen /></span> Rangkuman Materi Singkat
                                        </h2>
                                        <div className="grid md:grid-cols-2 gap-6 text-sm">
                                            <div>
                                                <h3 className="font-bold text-blue-700 mb-1 flex items-center"><span className="mr-1"><IconNetwork /></span> Pengertian & Tipe</h3>
                                                <p className="mb-2"><strong>Jaringan Komputer:</strong> Kumpulan komputer yang terhubung untuk berbagi data dan sumber daya.</p>
                                                <ul className="list-disc pl-5 space-y-1 text-gray-600">
                                                    <li><strong>LAN (Local):</strong> Jaringan area kecil (sekolah, lab).</li>
                                                    <li><strong>MAN (Metropolitan):</strong> Antar gedung dalam satu kota.</li>
                                                    <li><strong>WAN (Wide):</strong> Antar negara/benua.</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-blue-700 mb-1 flex items-center"><span className="mr-1"><IconGlobe /></span> Koneksi & Internet</h3>
                                                <ul className="list-disc pl-5 space-y-1 text-gray-600">
                                                    <li><strong>Wired:</strong> Fiber Optik (Cepat, cahaya), UTP (Tembaga).</li>
                                                    <li><strong>Wireless:</strong> Wi-Fi, Bluetooth, Satelit (VSAT).</li>
                                                    <li><strong>ISP:</strong> Penyedia jasa internet.</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <h3 className="font-bold text-blue-700 mb-1 flex items-center"><span className="mr-1"><IconShield /></span> Keamanan Data</h3>
                                                <ul className="list-disc pl-5 space-y-1 text-gray-600">
                                                    <li><strong>Enkripsi:</strong> Mengubah data jadi kode acak.</li>
                                                    <li><strong>Firewall:</strong> Menyaring lalu lintas jaringan.</li>
                                                    <li><strong>Phishing:</strong> Penipuan link palsu untuk curi data.</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </section>

                                    {/* Kisi Kisi */}
                                    <section className="bg-gray-50 p-6 rounded-xl border border-gray-200">
                                        <h2 className="flex items-center text-xl font-bold text-gray-800 mb-4">
                                            <span className="mr-2"><IconFileText /></span> Kisi-Kisi Soal (25 Soal)
                                        </h2>
                                        <div className="overflow-x-auto">
                                            <table className="w-full text-sm text-left border-collapse">
                                                <thead>
                                                    <tr className="bg-gray-200 text-gray-700">
                                                        <th className="p-2 border">No</th>
                                                        <th className="p-2 border">Materi</th>
                                                        <th className="p-2 border">Level Kognitif</th>
                                                        <th className="p-2 border">Jumlah</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr><td className="p-2 border">1</td><td className="p-2 border">Pengertian Dasar & Topologi</td><td className="p-2 border">C1 - C3</td><td className="p-2 border">5 Soal</td></tr>
                                                    <tr><td className="p-2 border">2</td><td className="p-2 border">Tipe Jaringan (LAN/MAN/WAN)</td><td className="p-2 border">C3 - C4</td><td className="p-2 border">5 Soal</td></tr>
                                                    <tr><td className="p-2 border">3</td><td className="p-2 border">Jenis Koneksi (Wired/Wireless)</td><td className="p-2 border">C2 - C5</td><td className="p-2 border">5 Soal</td></tr>
                                                    <tr><td className="p-2 border">4</td><td className="p-2 border">Enkripsi & Keamanan</td><td className="p-2 border">C1 - C4</td><td className="p-2 border">5 Soal</td></tr>
                                                    <tr><td className="p-2 border">5</td><td className="p-2 border">Proteksi & Analisis Masalah</td><td className="p-2 border">C4 - C6</td><td className="p-2 border">5 Soal</td></tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </section>
                                    <div className="text-center mt-8">
                                        <button onClick={() => setStep('form')} className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition transform hover:scale-105 flex items-center mx-auto gap-2">
                                            Mulai Isi Data <IconSend/>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {step === 'form' && (
                        <div className="min-h-screen bg-blue-50 flex items-center justify-center p-4">
                            <div className="bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border-t-4 border-blue-600 relative animate-fade-in">
                                <h2 className="text-2xl font-bold text-center mb-6 text-gray-800">Identitas Peserta</h2>
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4 text-xs text-yellow-700 rounded">
                                    <p className="font-bold flex items-center gap-1"><IconLock/> PERHATIAN:</p>
                                    <p>Ujian hanya dapat dikerjakan <strong>SATU KALI</strong>. Pastikan data benar.</p>
                                </div>
                                <form onSubmit={handleStartExam} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">Nama Lengkap</label>
                                        <input required type="text" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" value={studentData.name} onChange={e => setStudentData({...studentData, name: e.target.value})} />
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                            <select required className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" value={studentData.class} onChange={e => setStudentData({...studentData, class: e.target.value})}>
                                                <option value="">Pilih...</option>
                                                {['7A','7B','7C','7D','7E','7F','7G','8A','8B'].map(k => <option key={k} value={k}>{k}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">No. Absen</label>
                                            <input required type="number" className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" value={studentData.absentNo} onChange={e => setStudentData({...studentData, absentNo: e.target.value})} />
                                        </div>
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">No. HP Ortu (WA)</label>
                                        <input required type="tel" placeholder="0812..." className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" value={studentData.parentPhone} onChange={e => setStudentData({...studentData, parentPhone: e.target.value})} />
                                    </div>
                                    <button type="submit" disabled={!isExamOpen} className={`w-full font-bold py-3 rounded-lg shadow mt-4 transition flex items-center justify-center gap-2 ${isExamOpen ? 'bg-green-600 hover:bg-green-700 text-white cursor-pointer' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}>
                                        {isExamOpen ? "Mulai Ujian" : "Belum Dibuka"} {!isExamOpen && <IconLock/>}
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}

                    {step === 'exam' && questions[currentQIndex] && (
                        <div className="min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4">
                            <div className="w-full max-w-3xl bg-white rounded-2xl shadow-xl overflow-hidden animate-fade-in">
                                <div className="bg-gray-800 text-white p-4 flex justify-between items-center">
                                    <div>
                                        <span className="text-gray-400 text-sm">Soal {currentQIndex + 1} / 25</span>
                                        <div className="font-bold text-lg text-blue-300">{questions[currentQIndex].type === 'complex' ? 'Pilihan Ganda Kompleks' : 'Pilihan Ganda'}</div>
                                    </div>
                                    <div className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-mono font-bold text-xl ${timeLeft <= 10 ? 'bg-red-600 animate-pulse' : 'bg-blue-600'}`}>
                                        <IconClock /> <span>{timeLeft}s</span>
                                    </div>
                                </div>
                                <div className="p-6 md:p-8">
                                    <h3 className="text-xl font-medium mb-6 leading-relaxed text-gray-800">{questions[currentQIndex].question}</h3>
                                    <div className="space-y-3">
                                        {questions[currentQIndex].options.map((opt, idx) => {
                                            const isSelected = (answers[questions[currentQIndex].id] || []).includes(idx);
                                            return (
                                                <div key={idx} onClick={() => handleOptionSelect(questions[currentQIndex].id, idx, questions[currentQIndex].type)} className={`p-4 border-2 rounded-xl cursor-pointer transition flex items-center ${isSelected ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-blue-300'}`}>
                                                    <div className={`w-6 h-6 border-2 flex items-center justify-center mr-3 ${questions[currentQIndex].type === 'single' ? 'rounded-full' : 'rounded-md'} ${isSelected ? 'bg-blue-500 border-blue-500' : 'border-gray-300'}`}>
                                                        {isSelected && <div className="w-2 h-2 bg-white rounded-full"></div>}
                                                    </div>
                                                    <span className="text-gray-700">{opt}</span>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                                <div className="bg-gray-50 p-4 border-t border-gray-200 flex justify-end">
                                    <button onClick={() => handleNextQuestion(false)} className="bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-lg font-semibold flex items-center gap-2">
                                        {currentQIndex === 24 ? "Selesai" : "Selanjutnya"} <IconSend/>
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {step === 'result' && examResult && (
                        <div className="min-h-screen bg-green-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-2xl shadow-2xl p-8 max-w-lg w-full text-center animate-fade-in">
                                <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600">
                                    <IconCheckCircle className="w-10 h-10"/>
                                </div>
                                <h2 className="text-3xl font-bold text-gray-800 mb-2">Ujian Selesai!</h2>
                                <p className="text-gray-500 mb-6">Terima kasih {studentData.name}</p>
                                <div className="bg-gray-100 rounded-xl p-6 mb-8">
                                    <div className="text-5xl font-bold text-blue-600 mb-2">{examResult.score.toFixed(0)}</div>
                                    <div className="text-sm text-gray-500 uppercase tracking-wide">Nilai Akhir</div>
                                    <div className="flex justify-center space-x-8 mt-6">
                                        <div><div className="text-xl font-bold text-green-600">{examResult.correct}</div><div className="text-xs text-gray-500">Benar</div></div>
                                        <div><div className="text-xl font-bold text-red-500">{examResult.wrong}</div><div className="text-xs text-gray-500">Salah</div></div>
                                    </div>
                                </div>
                                <button onClick={sendToWhatsApp} className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg flex items-center justify-center transition mb-4 gap-2">
                                    <IconSend/> Kirim Laporan ke WA Orang Tua
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<InformatikaExamApp />);
    </script>
</body>
</html>
